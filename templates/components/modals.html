<!-- 筛选记录模态框 -->
<div class="modal fade" id="filterModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content bg-dark">
            <div class="modal-header bg-primary">
                <h5 class="modal-title text-white">筛选业务记录</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="filter-form">
                    <div class="mb-3">
                        <label class="form-label">业务类型</label>
                        <select class="form-select" id="filter-type">
                            <option value="">全部</option>
                            <option value="调度指令">调度指令</option>
                            <option value="交易执行">交易执行</option>
                            <option value="设备维护">设备维护</option>
                            <option value="充电业务">充电业务</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">执行状态</label>
                        <select class="form-select" id="filter-status">
                            <option value="">全部</option>
                            <option value="已完成">已完成</option>
                            <option value="执行中">执行中</option>
                            <option value="待执行">待执行</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">执行时间范围</label>
                        <div class="input-group">
                            <input type="datetime-local" class="form-control" id="filter-start-time">
                            <span class="input-group-text">至</span>
                            <input type="datetime-local" class="form-control" id="filter-end-time">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">关键词搜索</label>
                        <div class="input-group">
                            <select class="form-select" id="filter-field" style="max-width: 150px;">
                                <option value="all">全部字段</option>
                                <option value="recordId">记录ID</option>
                                <option value="content">执行内容</option>
                                <option value="target">目标对象</option>
                            </select>
                            <input type="text" class="form-control" id="filter-keyword" placeholder="输入搜索关键词">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer bg-dark border-top border-secondary">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button type="button" class="btn btn-light" id="reset-filter">重置</button>
                <button type="button" class="btn btn-primary" id="apply-filter">应用筛选</button>
            </div>
        </div>
    </div>
</div>

<!-- 记录详情模态框 -->
<div class="modal fade" id="recordDetailModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content bg-dark">
            <div class="modal-header bg-primary">
                <h5 class="modal-title text-white">业务记录详情</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label">记录ID</label>
                            <div class="form-control" id="detail-id">BIZ20240326001</div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">业务类型</label>
                            <div class="form-control" id="detail-type">调度指令</div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">执行内容</label>
                            <div class="form-control" id="detail-content">功率调整 (80kW → 120kW)</div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">目标对象</label>
                            <div class="form-control" id="detail-target">成都高新区A3站快充桩#5</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label">执行时间</label>
                            <div class="form-control" id="detail-execute-time">2024-03-26 09:15:23</div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">完成时间</label>
                            <div class="form-control" id="detail-complete-time">2024-03-26 09:16:45</div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">状态</label>
                            <div class="form-control">
                                <span class="badge bg-success" id="detail-status">已完成</span>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">执行结果</label>
                            <div class="form-control" id="detail-result">
                                功率调整成功，目标功率120kW已达到，充电桩运行正常，响应时间1.5秒，执行效率98.5%
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-4">
                    <h6>执行历史</h6>
                    <div class="table-responsive">
                        <table class="table table-centered table-nowrap mb-0">
                            <thead>
                                <tr>
                                    <th style="width: 160px;">时间</th>
                                    <th>事件</th>
                                </tr>
                            </thead>
                            <tbody id="detail-timeline">
                                <tr>
                                    <td>2024-03-26 09:15:23</td>
                                    <td>开始执行业务</td>
                                </tr>
                                <tr>
                                    <td>2024-03-26 09:15:45</td>
                                    <td>系统验证通过，参数校验完成</td>
                                </tr>
                                <tr>
                                    <td>2024-03-26 09:16:30</td>
                                    <td>执行指令下发，充电桩开始功率调整</td>
                                </tr>
                                <tr>
                                    <td>2024-03-26 09:16:45</td>
                                    <td class="text-success">业务执行完成，功率调整目标达成</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer bg-dark border-top border-secondary">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" id="export-detail">导出详情</button>
            </div>
        </div>
    </div>
</div>




<!-- 工单详情模态框 -->
<div class="modal fade" id="workOrderDetailModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content bg-dark">
            <div class="modal-header">
                <h5 class="modal-title">工单详情</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="equipment-detail-card mb-4">
                    <h5 class="mb-3">设备信息</h5>
                    <div class="equipment-specs">
                        <div class="spec-item">
                            <div class="spec-label">设备名称</div>
                            <div class="spec-value">主变压器#1</div>
                        </div>
                        <div class="spec-item">
                            <div class="spec-label">设备类型</div>
                            <div class="spec-value">变压器</div>
                        </div>
                        <div class="spec-item">
                            <div class="spec-label">运行时长</div>
                            <div class="spec-value">3650天</div>
                        </div>
                        <div class="spec-item">
                            <div class="spec-label">上次检修</div>
                            <div class="spec-value">2024-01-15</div>
                        </div>
                    </div>
                </div>

                <div class="maintenance-timeline">
                    <div class="timeline-item completed">
                        <h6>创建工单</h6>
                        <p>2024-04-01 09:00:00</p>
                        <small class="text-muted">由系统管理员创建</small>
                    </div>
                    <div class="timeline-item completed">
                        <h6>分配负责人</h6>
                        <p>2024-04-01 09:15:00</p>
                        <small class="text-muted">指派给张工</small>
                    </div>
                    <div class="timeline-item">
                        <h6>开始检修</h6>
                        <p>2024-04-01 10:00:00</p>
                        <small class="text-muted">检修团队到达现场</small>
                    </div>
                    <div class="timeline-item">
                        <h6>完成检修</h6>
                        <p>待完成</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary">导出报告</button>
            </div>
        </div>
    </div>
</div>

<!-- 充电站监控模态框 -->
<div class="modal fade" id="monitoringModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content bg-dark">
            <div class="modal-header">
                <h5 class="modal-title">充电站监控 - <span id="monitoringStationName"></span></h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="monitoring-panel mb-4">
                            <h6 class="mb-3">实时数据</h6>
                            <div class="monitoring-data">
                                <!-- 实时数据由JS动态更新 -->
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="monitoring-panel mb-4">
                            <h6 class="mb-3">端口状态</h6>
                            <div class="port-status">
                                <!-- 端口状态由JS动态更新 -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="monitoring-panel">
                    <h6 class="mb-3">实时监控图表</h6>
                    <div id="monitoringChart"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 充电预约模态框 -->
<div class="modal fade" id="reservationModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content bg-dark">
            <div class="modal-header">
                <h5 class="modal-title">充电预约 - <span id="reservationStationName"></span></h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="reservation-calendar">
                    <!-- 预约日历由JS动态生成 -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 维护管理模态框 -->
<div class="modal fade" id="maintenanceModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content bg-dark">
            <div class="modal-header">
                <h5 class="modal-title">维护管理 - <span id="maintenanceStationName"></span></h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="maintenance-history">
                    <!-- 维护历史记录由JS动态生成 -->
                </div>
            </div>
        </div>
    </div>
</div> 