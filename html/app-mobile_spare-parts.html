<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2196f3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>备件管理 - 能源管理系统</title>
    <link rel="stylesheet" href="static/css/spare-parts.css">
    <!-- 引入CSS文件 -->
    <link href="static/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="static/css/icons.min.css" rel="stylesheet" type="text/css">
    <link href="static/css/app.min.css" rel="stylesheet" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@7.2.96/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="static/css/report.css" rel="stylesheet" type="text/css">
    <!-- 引入第三方库 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <!-- 引入字体图标 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- 引入第三方库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <link href="static/css/energy-mobile.css" rel="stylesheet" type="text/css">



</head>
<body>
    <div id="layout-wrapper">
        <!-- 顶部导航栏 -->
        <header class="mobile-header">
            <div class="header-container">
                <div class="header-left">
                    <button class="btn-icon" onclick="history.back()">
                        <i class="mdi mdi-arrow-left"></i>
                    </button>
                </div>

                <div class="header-title">
                    <h1>备件管理</h1>
                </div>

                <div class="header-right">
                    <button class="btn-icon" id="refreshBtn" onclick="refreshData()">
                        <i class="mdi mdi-refresh"></i>
                    </button>
                    <button class="btn-icon" id="notificationBtn">
                        <i class="mdi mdi-bell"></i>
                        <!-- <span class="notification-badge">1</span> -->
                    </button>
                </div>
            </div>
        </header>

        <!-- 主要内容区域 -->
        <div class="main-content">
            <div class="page-content" style="padding-bottom: 80px;">
                <div class="container-fluid">
                    <!-- 搜索栏 -->
                    <div class="search-bar">
                        <div class="search-input-wrapper">
                            <i class="mdi mdi-magnify"></i>
                            <input type="search" class="search-input" id="sparePartSearch" placeholder="搜索备件名称、编号...">
                        </div>
                    </div>

                    <!-- 类别选择标签 -->
                    <div class="category-tabs">
                        <button class="tab-btn active" data-category="all">全部</button>
                        <button class="tab-btn" data-category="mechanical">机械类</button>
                        <button class="tab-btn" data-category="electrical">电气类</button>
                        <button class="tab-btn" data-category="tools">工具类</button>
                        <button class="tab-btn" data-category="others">其他</button>
                    </div>

                    <!-- 备件列表 -->
                    <div class="spare-parts-list" id="sparePartsList">
                        <!-- 备件卡片示例 -->
                        <div class="spare-part-card" data-category="electrical" data-part-id="SPR-001">
                            <div class="part-info">
                                <div class="part-name">光伏组件</div>
                                <div class="part-number">SPR-001</div>
                                <div class="part-stock">
                                    <span class="stock-label">库存:</span>
                                    <span class="stock-value">25</span>
                                    <span class="stock-unit">件</span>
                                </div>
                                <div class="part-details">
                                    <span class="detail-item">规格: 450W</span>
                                    <span class="detail-item">位置: A区-01</span>
                                </div>
                            </div>
                            <div class="part-actions">
                                <button class="btn btn-sm btn-primary request-btn" data-part-id="SPR-001">申领</button>
                                <button class="btn btn-sm btn-outline-secondary details-btn" data-part-id="SPR-001">
                                    <i class="mdi mdi-information"></i>
                                </button>
                            </div>
                        </div>

                        <div class="spare-part-card" data-category="electrical" data-part-id="SPR-002">
                            <div class="part-info">
                                <div class="part-name">逆变器</div>
                                <div class="part-number">SPR-002</div>
                                <div class="part-stock warning">
                                    <span class="stock-label">库存:</span>
                                    <span class="stock-value">5</span>
                                    <span class="stock-unit">台</span>
                                </div>
                                <div class="part-details">
                                    <span class="detail-item">规格: 50kW</span>
                                    <span class="detail-item">位置: B区-02</span>
                                </div>
                            </div>
                            <div class="part-actions">
                                <button class="btn btn-sm btn-primary request-btn" data-part-id="SPR-002">申领</button>
                                <button class="btn btn-sm btn-outline-secondary details-btn" data-part-id="SPR-002">
                                    <i class="mdi mdi-information"></i>
                                </button>
                            </div>
                        </div>

                        <div class="spare-part-card" data-category="electrical" data-part-id="SPR-003">
                            <div class="part-info">
                                <div class="part-name">蓄电池</div>
                                <div class="part-number">SPR-003</div>
                                <div class="part-stock danger">
                                    <span class="stock-label">库存:</span>
                                    <span class="stock-value">2</span>
                                    <span class="stock-unit">组</span>
                                </div>
                                <div class="part-details">
                                    <span class="detail-item">规格: 100Ah</span>
                                    <span class="detail-item">位置: C区-03</span>
                                </div>
                            </div>
                            <div class="part-actions">
                                <button class="btn btn-sm btn-primary request-btn" data-part-id="SPR-003">申领</button>
                                <button class="btn btn-sm btn-outline-secondary details-btn" data-part-id="SPR-003">
                                    <i class="mdi mdi-information"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 申领备件弹窗 -->
                    <div class="modal fade" id="requestModal" tabindex="-1">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">申领备件</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                </div>
                                <div class="modal-body">
                                    <form id="requestForm">
                                        <div class="mb-3">
                                            <label class="form-label">备件名称</label>
                                            <input type="text" class="form-control" id="requestPartName" readonly>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">申领数量</label>
                                            <input type="number" class="form-control" id="requestQuantity" min="1" required>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">申领原因</label>
                                            <textarea class="form-control" id="requestReason" rows="3" required></textarea>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                                    <button type="button" class="btn btn-primary" id="submitRequest">确认申领</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 添加备件弹窗 -->
                    <div class="modal fade" id="addPartModal" tabindex="-1">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">添加备件</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                </div>
                                <div class="modal-body">
                                    <form id="addPartForm">
                                        <div class="mb-3">
                                            <label class="form-label">备件名称</label>
                                            <input type="text" class="form-control" id="newPartName" required>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">备件类别</label>
                                            <select class="form-select" id="newPartCategory" required>
                                                <option value="mechanical">机械类</option>
                                                <option value="electrical">电气类</option>
                                                <option value="tools">工具类</option>
                                                <option value="others">其他</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">规格型号</label>
                                            <input type="text" class="form-control" id="newPartSpec" required>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">初始库存</label>
                                            <input type="number" class="form-control" id="newPartStock" min="0" required>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">库存单位</label>
                                            <input type="text" class="form-control" id="newPartUnit" required>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">存放位置</label>
                                            <input type="text" class="form-control" id="newPartLocation" required>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                                    <button type="button" class="btn btn-primary" id="submitNewPart">确认添加</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 悬浮添加按钮 -->
                    <button class="fab-button" id="addPartBtn" data-bs-toggle="modal" data-bs-target="#addPartModal">
                        <i class="mdi mdi-plus"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- 底部导航栏 -->
        <footer class="mobile-footer">
            <nav class="footer-nav">
                <a href="app-mobile_home.html" class="nav-item">
                    <i class="mdi mdi-home"></i>
                    <span>首页</span>
                </a>
                <a href="app-mobile_index.html" class="nav-item">
                    <i class="mdi mdi-chart-line"></i>
                    <span>预测</span>
                </a>
                <a href="app-mobile_workorder.html" class="nav-item">
                    <i class="mdi mdi-clipboard-text"></i>
                    <span>工单</span>
                </a>
                <a href="app-mobile_profile.html" class="nav-item">
                    <i class="mdi mdi-account"></i>
                    <span>我的</span>
                </a>
            </nav>
        </footer>
    </div>

    <!-- 引入JavaScript文件 -->
    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/bootstrap.bundle.min.js"></script>
    <script src="static/js/spare-parts.js"></script>
</body>
</html>