<!doctype html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <title>驭能能源管理系统</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta content="Premium Multipurpose Admin & Dashboard Template" name="description">
        <meta content="Themesbrand" name="author">

        <!-- plugin css -->
        <link href="static/css/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css">

        <!-- preloader css -->
        <link rel="stylesheet" href="static/css/preloader.min.css" type="text/css">

        <!-- Bootstrap Css -->
        <link href="static/css/bootstrap.min.css" id="bootstrap-style" rel="stylesheet" type="text/css">
        <!-- Icons Css -->
        <link href="static/css/icons.min.css" rel="stylesheet" type="text/css">
        <!-- App Css-->
        <link href="static/css/app.min.css" id="app-style" rel="stylesheet" type="text/css">

        <!-- 在其他CSS之前添加Font Awesome -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

        <style>
            #wind_power_area { min-height: 500px; }
            .reset-btn {
                position: absolute;
                right: 20px;
                top: 20px;
                padding: 5px 15px;
                background: #4F8CBE;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                z-index: 10;
            }

            /* 图标容器样式 */
            .avatar-sm {
                height: 3rem;
                width: 3rem;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            /* 图标大小样式 */
            .font-size-24 {
                font-size: 24px !important;
            }

            /* 图标标题样式 */
            .avatar-title {
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            /* 卡片内容样式优化 */
            .card-body {
                padding: 1.25rem;
            }

            /* 确保图标和文字之间有适当间距 */
            .d-flex .flex-grow-1 {
                margin-right: 1rem;
            }

            /* 图标背景颜色 */
            .bg-primary {
                background-color: #4F8CBE !important;
            }

            .bg-warning {
                background-color: #f1b44c !important;
            }

            .bg-info {
                background-color: #50a5f1 !important;
            }

            .bg-success {
                background-color: #34c38f !important;
            }

            /* 添加悬停效果 */
            .avatar-sm {
                transition: transform 0.2s ease;
            }

            .avatar-sm:hover {
                transform: scale(1.1);
            }

            /* 系统状态卡片样式优化 */
            .custom-card .card-header h5 {
                font-size: 1.1rem;
                font-weight: 600;
            }

            .custom-card .text-muted {
                font-size: 0.85rem !important;
                opacity: 0.8;
            }

            .custom-card .fw-bold {
                font-size: 1rem !important;
                font-weight: 600 !important;
            }

            /* 预测准确率统计样式 */
            .prediction-stats .border {
                background-color: rgba(255, 255, 255, 0.05);
                border-color: rgba(255, 255, 255, 0.1) !important;
            }

            .prediction-stats small.text-muted {
                font-size: 0.75rem !important;
            }

            .prediction-stats span.fw-bold {
                font-size: 1.1rem !important;
                font-weight: 600 !important;
            }

            /* 系统信息样式 */
            .system-info h6,
            .mt-3 h6 {
                font-size: 1rem !important;
                font-weight: 600;
                margin-bottom: 1rem !important;
            }

            .system-info .small {
                font-size: 0.9rem !important;
            }

            .system-info i {
                font-size: 1rem;
            }

            /* 模型训练信息样式 */
            .mt-3 small {
                font-size: 0.85rem !important;
            }

            .mt-3 .small {
                font-size: 0.9rem !important;
            }

            /* 进度条样式优化 */
            .progress {
                height: 8px !important;
                margin: 0.5rem 0;
            }

            /* 图标大小统一 */
            .custom-card i {
                font-size: 1.1rem;
                width: 1.5rem;
                text-align: center;
            }

            /* 卡片内边距优化 */
            .custom-card .card-body {
                padding: 1.25rem !important;
            }

            /* 分隔标题样式 */
            .custom-card h6.text-muted {
                font-size: 0.95rem !important;
                font-weight: 600;
                margin: 1rem 0 0.75rem 0;
                padding-bottom: 0.5rem;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            /* 状态指标样式 */
            .prediction-stats .border {
                padding: 0.75rem 0.5rem !important;
                transition: transform 0.2s ease;
            }

            .prediction-stats .border:hover {
                transform: scale(1.05);
                background-color: rgba(255, 255, 255, 0.1);
            }

            /* 响应式调整 */
            @media (max-width: 768px) {
                .custom-card .card-body {
                    padding: 1rem !important;
                }
                
                .prediction-stats .col-3 {
                    padding: 0.25rem;
                }
                
                .system-info .col-6 {
                    margin-bottom: 0.5rem;
                }
            }

            /* 地图容器样式 */
            #sichuan-map {
                width: 100%;
                height: 400px;
                background: #404a59;
                position: relative;
                z-index: 1;
                margin: 0;
                padding: 0;
            }

            /* 地图图标样式 */
            .custom-div-icon {
                background: none !important;
                border: none !important;
                width: 30px !important;
                height: 30px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }

            .custom-div-icon i {
                font-size: 24px;
                filter: drop-shadow(0 2px 2px rgba(0,0,0,0.2));
            }

            /* 弹出窗口样式 */
            .leaflet-popup-content {
                margin: 10px;
                min-width: 200px;
            }

            .leaflet-popup-content strong {
                display: block;
                margin-bottom: 5px;
                color: #333;
                font-size: 14px;
            }

            .leaflet-popup-content small {
                color: #666;
            }
        </style>

        <!-- 在 <head> 标签内添加，放在其他CSS文件之前 -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>

        <!-- 在 head 标签中 -->
        <script src="https://cdn.jsdelivr.net/npm/echarts@5.6.0/dist/echarts.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/echarts@5.6.0/map/js/china.js"></script>

        <!-- 添加 ECharts 的样式 -->
        <style>
            #sichuan-map {
                width: 100%;
                height: 400px;
                background: #404a59;
                position: relative;
                z-index: 1;
                margin: 0;
                padding: 0;
            }
        </style>

        <!-- 在 head 标签中添加 -->
        <script>
            // 添加调试信息
            console.log('Start loading scripts');
        </script>
        <script src="static/js/echarts.min.js"></script>
        <script>
            // 检查 ECharts 是否加载
            console.log('ECharts loaded:', typeof echarts !== 'undefined');
        </script>
        <script src="static/js/china.js"></script>
        <script>
            // 检查中国地图数据是否加载
            console.log('China map loaded:', echarts && echarts.getMap && echarts.getMap('china'));
        </script>

        <!-- 地图容器样式 -->
        <style>
            #device-distribution-map {
                width: 100%;
                height: 400px;
                background: #404a59;
                border-radius: 8px;
            }
        </style>

        <!-- 地图容器样式 -->
        <style>
            #device-map {
                width: 100%;
                height: 400px;
                background: #404a59;
                border-radius: 8px;
            }
        </style>

        <!-- 在 head 标签内添加 SweetAlert2 CSS -->
        <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.min.css" rel="stylesheet">
        <!-- SweetAlert2 JS -->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.all.min.js"></script>

    </head>

    <body data-layout-mode="dark" data-topbar="dark" data-sidebar="dark" class="sidebar-enable">

    <!-- <body data-layout="horizontal"> -->

        <!-- Begin page -->
        <div id="layout-wrapper">

            
            <header id="page-topbar">
                <div class="navbar-header">
                    <div class="d-flex">
                        <!-- LOGO -->
                        <div class="navbar-brand-box">
                            <a href="" class="logo logo-dark">
                                <span class="logo-sm">
                                    <img src="static/picture/logo.png" alt="" height="24">
                                </span>
                                <span class="logo-lg">
                                    <img src="static/picture/logo.png" alt="" height="24"> <span class="logo-txt">驭能能源管理系统</span>
                                </span>
                            </a>

                            <a href="" class="logo logo-light">
                                <span class="logo-sm">
                                    <img src="static/picture/logo.png" alt="" height="24">
                                </span>
                                <span class="logo-lg">
                                    <img src="static/picture/logo.png" alt="" height="24"> <span class="logo-txt">驭能能源管理系统</span>
                                </span>
                            </a>
                        </div>

                        <button type="button" class="btn btn-sm px-3 font-size-16 header-item" id="vertical-menu-btn">
                            <i class="fa fa-fw fa-bars"></i>
                        </button>

                        <!-- App Search-->
                        <form class="app-search d-none d-lg-block">
                            <div class="position-relative">
                                <input type="text" class="form-control" placeholder="Search...">
                                <button class="btn btn-primary" type="button"><i class="bx bx-search-alt align-middle"></i></button>
                            </div>
                        </form>
                    </div>

                    <div class="d-flex">

                        <div class="dropdown d-inline-block d-lg-none ms-2">
                            <button type="button" class="btn header-item" id="page-header-search-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i data-feather="search" class="icon-lg"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0" aria-labelledby="page-header-search-dropdown">
        
                                <form class="p-3">
                                    <div class="form-group m-0">
                                        <div class="input-group">
                                            <input type="text" class="form-control" placeholder="Search ..." aria-label="Search Result">

                                            <button class="btn btn-primary" type="submit"><i class="mdi mdi-magnify"></i></button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <div class="dropdown d-none d-sm-inline-block">
                            <button type="button" class="btn header-item" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <img id="header-lang-img" src="static/picture/cn.png" alt="Header Language" height="16">
                            </button>
                            <div class="dropdown-menu dropdown-menu-end">

                                <!-- item-->
                                <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="en">
                                    <img src="static/picture/cn.png" alt="user-image" class="me-1" height="12"> <span class="align-middle">Chinese</span>
                                </a>
                                <!-- item-->
                                <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="sp">
                                    <img src="static/picture/spain.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">Spanish</span>
                                </a>

                                <!-- item-->
                                <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="gr">
                                    <img src="static/picture/germany.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">German</span>
                                </a>

                                <!-- item-->
                                <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="it">
                                    <img src="static/picture/italy.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">Italian</span>
                                </a>

                                <!-- item-->
                                <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="ru">
                                    <img src="static/picture/russia.jpg" alt="user-image" class="me-1" height="12"> <span class="align-middle">Russian</span>
                                </a>
                            </div>
                        </div>

                        <div class="dropdown d-none d-sm-inline-block">
                            <button type="button" class="btn header-item" id="mode-setting-btn">
                                <i data-feather="moon" class="icon-lg layout-mode-dark"></i>
                                <i data-feather="sun" class="icon-lg layout-mode-light"></i>
                            </button>
                        </div>

                        <div class="dropdown d-none d-lg-inline-block ms-1">
                            <button type="button" class="btn header-item" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i data-feather="grid" class="icon-lg"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
                                <div class="p-2">
                                    <div class="row g-0">
                                        <div class="col">
                                            <a class="dropdown-icon-item" href="#">
                                                <img src="static/picture/github.png" alt="Github">
                                                <span>GitHub</span>
                                            </a>
                                        </div>
                                        <div class="col">
                                            <a class="dropdown-icon-item" href="#">
                                                <img src="static/picture/bitbucket.png" alt="bitbucket">
                                                <span>Bitbucket</span>
                                            </a>
                                        </div>
                                        <div class="col">
                                            <a class="dropdown-icon-item" href="#">
                                                <img src="static/picture/dribbble.png" alt="dribbble">
                                                <span>Dribbble</span>
                                            </a>
                                        </div>
                                    </div>

                                    <div class="row g-0">
                                        <div class="col">
                                            <a class="dropdown-icon-item" href="#">
                                                <img src="static/picture/dropbox.png" alt="dropbox">
                                                <span>Dropbox</span>
                                            </a>
                                        </div>
                                        <div class="col">
                                            <a class="dropdown-icon-item" href="#">
                                                <img src="static/picture/mail_chimp.png" alt="mail_chimp">
                                                <span>Mail Chimp</span>
                                            </a>
                                        </div>
                                        <div class="col">
                                            <a class="dropdown-icon-item" href="#">
                                                <img src="static/picture/slack.png" alt="slack">
                                                <span>Slack</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="dropdown d-inline-block">
                            <button type="button" class="btn header-item noti-icon position-relative" id="page-header-notifications-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i data-feather="bell" class="icon-lg"></i>
                                <span class="badge bg-danger rounded-pill">5</span>
                            </button>
                            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0" aria-labelledby="page-header-notifications-dropdown">
                                <div class="p-3">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <h6 class="m-0"> Notifications </h6>
                                        </div>
                                        <div class="col-auto">
                                            <a href="#!" class="small text-reset text-decoration-underline"> Unread (3)</a>
                                        </div>
                                    </div>
                                </div>
                                <div data-simplebar="" style="max-height: 230px;">
                                    <a href="#!" class="text-reset notification-item">
                                        <div class="d-flex">
                                            <div class="flex-shrink-0 me-3">
                                                <img src="static/picture/avatar-3.jpg" class="rounded-circle avatar-sm" alt="user-pic">
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="mb-1">James Lemire</h6>
                                                <div class="font-size-13 text-muted">
                                                    <p class="mb-1">It will seem like simplified Chinese.</p>
                                                    <p class="mb-0"><i class="mdi mdi-clock-outline"></i> <span>1 hours ago</span></p>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                    <a href="#!" class="text-reset notification-item">
                                        <div class="d-flex">
                                            <div class="flex-shrink-0 avatar-sm me-3">
                                                <span class="avatar-title bg-primary rounded-circle font-size-16">
                                                    <i class="bx bx-cart"></i>
                                                </span>
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="mb-1">Your order is placed</h6>
                                                <div class="font-size-13 text-muted">
                                                    <p class="mb-1">If several languages coalesce the grammar</p>
                                                    <p class="mb-0"><i class="mdi mdi-clock-outline"></i> <span>3 min ago</span></p>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                    <a href="#!" class="text-reset notification-item">
                                        <div class="d-flex">
                                            <div class="flex-shrink-0 avatar-sm me-3">
                                                <span class="avatar-title bg-success rounded-circle font-size-16">
                                                    <i class="bx bx-badge-check"></i>
                                                </span>
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="mb-1">Your item is shipped</h6>
                                                <div class="font-size-13 text-muted">
                                                    <p class="mb-1">If several languages coalesce the grammar</p>
                                                    <p class="mb-0"><i class="mdi mdi-clock-outline"></i> <span>3 min ago</span></p>
                                                </div>
                                            </div>
                                        </div>
                                    </a>

                                    <a href="#!" class="text-reset notification-item">
                                        <div class="d-flex">
                                            <div class="flex-shrink-0 me-3">
                                                <img src="static/picture/avatar-6.jpg" class="rounded-circle avatar-sm" alt="user-pic">
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="mb-1">Salena Layfield</h6>
                                                <div class="font-size-13 text-muted">
                                                    <p class="mb-1">As a skeptical Cambridge friend of mine occidental.</p>
                                                    <p class="mb-0"><i class="mdi mdi-clock-outline"></i> <span>1 hours ago</span></p>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                                <div class="p-2 border-top d-grid">
                                    <a class="btn btn-sm btn-link font-size-14 text-center" href="javascript:void(0)">
                                        <i class="mdi mdi-arrow-right-circle me-1"></i> <span>View More..</span> 
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="dropdown d-inline-block">
                            <button type="button" class="btn header-item right-bar-toggle me-2">
                                <i data-feather="settings" class="icon-lg"></i>
                            </button>
                        </div>

                        <div class="dropdown d-inline-block">
                            <button type="button" class="btn header-item bg-soft-light border-start border-end" id="page-header-user-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <img class="rounded-circle header-profile-user" src="static/picture/avatar-1.jpg" alt="Header Avatar">
                                <span class="d-none d-xl-inline-block ms-1 fw-medium">张明</span>
                                <i class="mdi mdi-chevron-down d-none d-xl-inline-block"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-end">
                                <!-- item-->
                                <a class="dropdown-item" href="apps-contacts-profile.html"><i class="mdi mdi-face-profile font-size-16 align-middle me-1"></i> Profile</a>
                                <a class="dropdown-item" href="auth-lock-screen.html"><i class="mdi mdi-lock font-size-16 align-middle me-1"></i> Lock screen</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="auth-logout.html"><i class="mdi mdi-logout font-size-16 align-middle me-1"></i> Logout</a>
                            </div>
                        </div>

                    </div>
                </div>
            </header>

            <!-- ========== Left Sidebar Start ========== -->
            <div class="vertical-menu">
                <div data-simplebar="" class="h-100">

                    <!--- Sidemenu -->
                    <div id="sidebar-menu">
                        <!-- Left Menu Start -->
                        <ul class="metismenu list-unstyled" id="side-menu">
                            <li class="menu-title" data-key="t-menu">View</li>

                            <li>
                                <a href="app-index.html">
                                    <i data-feather="home"></i>
                                    <span data-key="t-dashboard">数据总览</span>
                                </a>
                            </li>
                            <li class="menu-title mt-2" data-key="t-components">Basic</li>
                            <li>
                                <a href="javascript: void(0);" class="has-arrow">
                                    <i data-feather="users"></i>
                                    <span data-key="t-authentication">个人界面</span>
                                </a>
                                <ul class="sub-menu" aria-expanded="false">
                                    <li>
                                        <a href="app-contacts-profile.html">
                                            <span data-key="t-calendar">个人信息</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="app-calendar.html">
                                            <span data-key="t-calendar">日程表</span>
                                        </a>
                                    </li>
        
                                    <li>
                                        <a href="app-chat.html">
                                            <span data-key="t-chat">聊天</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a href="app-contacts-list.html">
                                    <i data-feather="file-text"></i>
                                    <span data-key="t-pages">用户列表</span>
                                </a>
                            </li>

                            <li class="menu-title mt-2" data-key="t-components">Operations</li>

                            
                            <li>
                                <a href="app-system_management.html">
                                    <i data-feather="grid"></i>
                                    <span data-key="t-apps">系统设置</span>
                                </a>
                            </li>
                            <li>
                                <a href="app-data_management.html">
                                    <i data-feather="sliders"></i>
                                    <span data-key="t-tables">数据管理</span>
                                </a>
                            </li>
                            <li>
                                <a href="app-business_process.html">
                                    <i data-feather="briefcase"></i>
                                    <span data-key="t-components">业务处理</span>
                                </a>
                            </li>

                            <li>
                                <a href="app-equipment_management.html">
                                    <i data-feather="cpu"></i>
                                    <span data-key="t-icons">设备管理</span>
                                </a>
                            </li>
                            <li>
                                <a href="app-inference-demo.html">
                                    <i data-feather="trending-up"></i>
                                    <span data-key="t-inference">推理示例</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- Sidebar -->
                </div>
            </div>
            <!-- Left Sidebar End -->

            <!-- ============================================================== -->
            <!-- Start right Content here -->
            <!-- ============================================================== -->
            <div class="main-content">
                <div class="page-content">
                    <div class="container-fluid">

                        <div class="container-fluid py-4">
                            <!-- 顶部统计卡片 -->
                            <div class="row mb-4">
                                <div class="col-xl-3 col-md-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-grow-1">
                                                    <h4 class="mb-2">2,856.4 MWh</h4>
                                                    <p class="text-muted mb-0">今日总发电量</p>
                                                    <small class="text-success">
                                                        <i class="fas fa-arrow-up"></i> 12.3% 同比增长
                                                    </small>
                                                </div>
                                                <!-- 第一个卡片的图标 -->
                                                <div class="avatar-sm rounded-circle bg-primary">
                                                    <span class="avatar-title rounded-circle">
                                                        <i class="fas fa-bolt font-size-24 text-white"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-3 col-md-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-grow-1">
                                                    <h4 class="mb-2">1,654.2 MWh</h4>
                                                    <p class="text-muted mb-0">光伏发电量</p>
                                                    <small class="text-success">
                                                        <i class="fas fa-sun"></i> 58% 占比
                                                    </small>
                                                </div>
                                                <!-- 第二个卡片的图标 -->
                                                <div class="avatar-sm rounded-circle bg-warning">
                                                    <span class="avatar-title rounded-circle">
                                                        <i class="fas fa-solar-panel font-size-24 text-white"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-3 col-md-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-grow-1">
                                                    <h4 class="mb-2">1,202.2 MWh</h4>
                                                    <p class="text-muted mb-0">风电发电量</p>
                                                    <small class="text-info">
                                                        <i class="fas fa-wind"></i> 42% 占比
                                                    </small>
                                                </div>
                                                <!-- 第三个卡片的图标 -->
                                                <div class="avatar-sm rounded-circle bg-info">
                                                    <span class="avatar-title rounded-circle">
                                                        <i class="fas fa-fan font-size-24 text-white"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-3 col-md-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-grow-1">
                                                    <h4 class="mb-2">1,523 吨</h4>
                                                    <p class="text-muted mb-0">碳减排量</p>
                                                    <small class="text-success">
                                                        <i class="fas fa-leaf"></i> 环保贡献
                                                    </small>
                                                </div>
                                                <!-- 第四个卡片的图标 -->
                                                <div class="avatar-sm rounded-circle bg-success">
                                                    <span class="avatar-title rounded-circle">
                                                        <i class="fas fa-tree font-size-24 text-white"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    
                            <!-- 主要内容区域 -->
                            <div class="row">
                                <!-- 左侧预测图表 -->
                                <div class="col-md-8">
                                    <div class="card custom-card mb-4">
                                        <div class="card-header bg-dark">
                                            <ul class="nav nav-tabs card-header-tabs">
                                                <li class="nav-item">
                                                    <a class="nav-link active" data-bs-toggle="tab" href="#solarpowerTab">太阳能发电量图表</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link" data-bs-toggle="tab" href="#windpowerTab">风力发电量图表</a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="card-body">
                                            <div class="tab-content">
                                                <div class="tab-pane fade show active" id="solarpowerTab">
                                                    <div class="row">
                                                        <div class="card">
                                                            <div class="card-header">
                                                                <h4 class="card-title mb-0">太阳能发电量图表</h4>
                                                            </div>
                                                            <div class="card-body">
                                                                <!-- 添加时间粒度选择和时间范围选择 -->
                                                                <div class="row mb-3">
                                                                    <div class="col-md-3">
                                                                        <label class="form-label">时间粒度</label>
                                                                        <select class="form-select" id="solarGranularity">
                                                                            <option value="year">年度发电量</option>
                                                                            <option value="month">月度发电量</option>
                                                                            <option value="day">日发电量</option>
                                                                            <option value="hour">小时发电量</option>
                                                                        </select>
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <label class="form-label">开始时间</label>
                                                                        <input type="datetime-local" class="form-control" id="solarStartTime">
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <label class="form-label">结束时间</label>
                                                                        <input type="datetime-local" class="form-control" id="solarEndTime">
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                        <label class="form-label">&nbsp;</label>
                                                                        <button class="btn btn-primary w-100" id="solarQuery">查询</button>
                                                                    </div>
                                                                </div>
                                                                <div id="solar_power_area" data-colors='["#4F8CBE", "#2ab57d"]' class="apex-charts" dir="ltr"></div>
                                                                <button id="resetZoom" class="btn btn-primary mt-2">重置视图</button>
                                                            </div>
                                                        </div><!--end card-->
                                                </div>
                                                </div>
                                                <!-- 风力发电图表 -->
                                                <div class="tab-pane fade" id="windpowerTab">
                                                    <div class="card-header">
                                                        <h4 class="card-title mb-0">风力发电量图表</h4>
                                                    </div>
                                                    <div class="card-body">
                                                        <!-- 添加时间粒度选择和时间范围选择 -->
                                                        <div class="row mb-3">
                                                            <div class="col-md-3">
                                                                <label class="form-label">时间粒度</label>
                                                                <select class="form-select" id="windGranularity">
                                                                    <option value="year">年度发电量</option>
                                                                    <option value="month">月度发电量</option>
                                                                    <option value="day">日发电量</option>
                                                                    <option value="hour">小时发电量</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-md-4">
                                                                <label class="form-label">开始时间</label>
                                                                <input type="datetime-local" class="form-control" id="windStartTime">
                                                            </div>
                                                            <div class="col-md-4">
                                                                <label class="form-label">结束时间</label>
                                                                <input type="datetime-local" class="form-control" id="windEndTime">
                                                            </div>
                                                            <div class="col-md-1">
                                                                <label class="form-label">&nbsp;</label>
                                                                <button class="btn btn-primary w-100" id="windQuery">查询</button>
                                                            </div>
                                                        </div>
                                                        <div id="wind_power_area" data-colors='["#4F8CBE", "#2ab57d"]' class="apex-charts" dir="ltr"></div>
                                                        <button id="resetWindZoom" class="btn btn-primary mt-2">重置视图</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                    
                                    <!-- 预测详情表格 -->
                                    <div class="card">
                                        <div class="card-header d-flex justify-content-between align-items-center">
                                            <h4 class="card-title" id="predictionTableTitle">发电预测详情</h4>
                                            <div class="btn-group" role="group" aria-label="Time period buttons">
                                                <button type="button" class="btn btn-primary table-period-btn" data-period="year">年</button>
                                                <button type="button" class="btn btn-primary table-period-btn" data-period="month">月</button>
                                                <button type="button" class="btn btn-primary table-period-btn active" data-period="day">日</button>
                                                <button type="button" class="btn btn-primary table-period-btn" data-period="hour">小时</button>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <table class="table table-bordered" id="predictionDetailsTable">
                                                    <thead>
                                                        <tr>
                                                            <th>时间</th>
                                                            <th>预测发电量</th>
                                                            <th>实际发电量</th>
                                                            <th>误差率</th>
                                                            <th>状态</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <!-- 表格内容将由 JavaScript 动态生成 -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 无人机检修调度模块 -->
                                    <div class="card custom-card mt-4">
                                        <div class="card-header d-flex justify-content-between align-items-center">
                                            <h5 class="mb-0">无人机检修调度</h5>
                                            <button class="btn btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#droneTaskOffcanvas" aria-controls="droneTaskOffcanvas">
                                                <i class="fas fa-plus me-1"></i>新建任务
                                            </button>
                                        </div>
                                        <div class="card-body">
                                            <!-- 无人机状态 -->
                                            <div class="mb-4">
                                                <h6 class="text-muted mb-3">无人机状态</h6>
                                                <div class="row g-2">
                                                    <div class="col-6 col-md-3">
                                                        <div class="border rounded p-2" data-drone-status="available">
                                                            <div class="d-flex align-items-center">
                                                                <i class="fas fa-drone text-success me-2"></i>
                                                                <div>
                                                                    <small class="text-muted d-block">可用</small>
                                                                    <span class="fw-bold">3台</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 col-md-3">
                                                        <div class="border rounded p-2" data-drone-status="in-task">
                                                            <div class="d-flex align-items-center">
                                                                <i class="fas fa-tools text-warning me-2"></i>
                                                                <div>
                                                                    <small class="text-muted d-block">任务中</small>
                                                                    <span class="fw-bold">2台</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 col-md-3">
                                                        <div class="border rounded p-2">
                                                            <div class="d-flex align-items-center">
                                                                <i class="fas fa-battery-three-quarters text-info me-2"></i>
                                                                <div>
                                                                    <small class="text-muted d-block">充电中</small>
                                                                    <span class="fw-bold">1台</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 col-md-3">
                                                        <div class="border rounded p-2">
                                                            <div class="d-flex align-items-center">
                                                                <i class="fas fa-wrench text-danger me-2"></i>
                                                                <div>
                                                                    <small class="text-muted d-block">维修中</small>
                                                                    <span class="fw-bold">1台</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 当前任务列表 -->
                                            <div class="mb-3">
                                                <h6 class="text-muted mb-3">当前任务</h6>
                                                <div class="table-responsive">
                                                    <table class="table table-sm">
                                                        <thead>
                                                            <tr>
                                                                <th>无人机编号</th>
                                                                <th>任务类型</th>
                                                                <th>目标设备</th>
                                                                <th>状态</th>
                                                                <th>进度</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>
                                                                    <span class="badge bg-primary">UAV-001</span>
                                                                </td>
                                                                <td>红外检测</td>
                                                                <td>光伏阵列A区</td>
                                                                <td><span class="badge bg-success">执行中</span></td>
                                                                <td>
                                                                    <div class="progress" style="height: 4px;">
                                                                        <div class="progress-bar bg-success" role="progressbar" style="width: 75%"></div>
                                                                    </div>
                                                                </td>
                                                        </tr>
                                                        <tr>
                                                                <td>
                                                                    <span class="badge bg-primary">UAV-003</span>
                                                                </td>
                                                                <td>设备巡检</td>
                                                                <td>3#风机组</td>
                                                                <td><span class="badge bg-warning">待起飞</span></td>
                                                                <td>
                                                                    <div class="progress" style="height: 4px;">
                                                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 0%"></div>
                                                                    </div>
                                                                </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                </div>
                                            </div>

                                            <!-- 今日调度统计 -->
                                            <div>
                                                <h6 class="text-muted mb-3">今日调度统计</h6>
                                                <div class="row g-2">
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-check-circle text-success me-2"></i>
                                                            <div>
                                                                <small class="text-muted d-block">已完成任务</small>
                                                                <span class="fw-bold">8次</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-clock text-warning me-2"></i>
                                                            <div>
                                                                <small class="text-muted d-block">平均任务时长</small>
                                                                <span class="fw-bold">42分钟</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-calendar-check text-info me-2"></i>
                                                            <div>
                                                                <small class="text-muted d-block">计划任务</small>
                                                                <span class="fw-bold">12次</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-exclamation-triangle text-danger me-2"></i>
                                                            <div>
                                                                <small class="text-muted d-block">异常中断</small>
                                                                <span class="fw-bold">1次</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                    
                                <!-- 右侧信息面板 -->
                                <div class="col-md-4">
                                    <!-- 系统状态卡片 -->
                                    <div class="card custom-card mb-4">
                                        <div class="card-header d-flex justify-content-between align-items-center">
                                            <h5 class="mb-0">系统状态</h5>
                                            <div class="btn-group">
                                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" 
                                                        data-bs-toggle="dropdown" aria-expanded="true">
                                                    模型设置
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="#" data-range="24h">24小时预测</a></li>
                                                    <li><a class="dropdown-item" href="#" data-range="48h">48小时预测</a></li>
                                                    <li><a class="dropdown-item" href="#" data-range="72h">72小时预测</a></li>
                                                    <li><hr class="dropdown-divider"></li>
                                                    <li><a class="dropdown-item" href="#" data-range="7d">7天预测</a></li>
                                                    <li><a class="dropdown-item" href="#" data-range="14d">14天预测</a></li>
                                                    <li><a class="dropdown-item" href="#" data-range="30d">30天预测</a></li>
                                                    <li><a class="dropdown-item" href="#" data-range="60d">60天预测</a></li>
                                                    <li><a class="dropdown-item" href="#" data-range="90d">90天预测</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="card-body p-3">
                                            <!-- 预测范围和模型状态 -->
                                            <div class="row mb-3">
                                                <div class="col-6">
                                                    <div class="d-flex align-items-center">
                                                        <i class="fas fa-clock text-primary me-2"></i>
                                                        <div>
                                                            <small class="text-muted d-block">预测范围</small>
                                                <span id="currentRange" class="fw-bold">24小时</span>
                                            </div>
                                            </div>
                                            </div>
                                                <div class="col-6">
                                                    <div class="d-flex align-items-center">
                                                        <i class="fas fa-check-circle text-success me-2"></i>
                                                        <div>
                                                            <small class="text-muted d-block">模型状态</small>
                                                            <span class="fw-bold">运行中</span>
                                                        </div>
                                            </div>
                                                </div>
                                            </div>

                                            <!-- 预测准确率统计 -->
                                            <div class="prediction-stats mb-3">
                                                <h6 class="text-muted mb-2">预测准确率统计</h6>
                                                <div class="row g-2">
                                                    <div class="col-3">
                                                        <div class="p-2 border rounded text-center">
                                                            <small class="text-muted d-block">小时级</small>
                                                            <span class="text-success fw-bold">98%</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="p-2 border rounded text-center">
                                                            <small class="text-muted d-block">日级</small>
                                                            <span class="text-success fw-bold">95%</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="p-2 border rounded text-center">
                                                            <small class="text-muted d-block">月级</small>
                                                            <span class="text-warning fw-bold">92%</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="p-2 border rounded text-center">
                                                            <small class="text-muted d-block">年级</small>
                                                            <span class="text-warning fw-bold">88%</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 系统信息 -->
                                            <div class="system-info">
                                                <h6 class="text-muted mb-2">系统信息</h6>
                                                <div class="row g-2">
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center mb-2">
                                                            <i class="fas fa-sync text-info me-2"></i>
                                                            <div>
                                                                <small class="text-muted d-block">最近更新</small>
                                                                <span class="small">2025-02-15 10:30:15</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center mb-2">
                                                            <i class="fas fa-database text-warning me-2"></i>
                                                            <div>
                                                                <small class="text-muted d-block">数据量</small>
                                                                <span class="small">1.2M 条</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-tachometer-alt text-success me-2"></i>
                                                            <div>
                                                                <small class="text-muted d-block">响应时间</small>
                                                                <span class="small">238ms</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-memory text-primary me-2"></i>
                                                            <div>
                                                                <small class="text-muted d-block">内存使用</small>
                                                                <span class="small">4.2GB</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 模型训练信息 -->
                                            <div class="mt-3">
                                                <h6 class="text-muted mb-2">模型训练信息</h6>
                                                <div class="d-flex justify-content-between align-items-center mb-2">
                                                    <small>最近训练时间</small>
                                                    <span class="small">2025-02-15 08:00</span>
                                                </div>
                                                <div class="progress" style="height: 6px;">
                                                    <div class="progress-bar bg-success" role="progressbar" style="width: 95%;" 
                                                         aria-valuenow="95" aria-valuemin="0" aria-valuemax="100"></div>
                                                </div>
                                                <div class="d-flex justify-content-between mt-1">
                                                    <small class="text-muted">模型性能评分</small>
                                                    <small class="text-success">95/100</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                    
                                    <!-- 设备分布地图 -->
                                    <div class="card custom-card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0">设备分布地图</h5>
                                        </div>
                                        <div class="card-body p-0">
                                            <!-- 地图容器 -->
                                            <div id="distribution-map" style="width: 100%; height: 400px; background: #404a59;"></div>
                                        </div>
                                    </div>
                    
                                    <!-- 预警信息卡片 -->
                                    <div class="card custom-card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0">预警信息</h5>
                                        </div>
                                        <div class="card-body p-0">
                                            <div class="list-group list-group-flush">
                                                <div class="list-group-item">
                                                    <div class="d-flex w-100 justify-content-between">
                                                        <h6 class="mb-1">光伏发电功率骤降</h6>
                                                        <small class="text-danger">紧急</small>
                                                    </div>
                                                    <p class="mb-1">成都光伏电站功率在10分钟内下降40%，疑似设备故障或天气突变</p>
                                                    <small class="text-muted">5分钟前 | 影响容量: 80MW</small>
                                                </div>
                                                <div class="list-group-item">
                                                    <div class="d-flex w-100 justify-content-between">
                                                        <h6 class="mb-1">风机偏航异常</h6>
                                                        <small class="text-warning">警告</small>
                                                    </div>
                                                    <p class="mb-1">甘孜风电基地3#、5#风机偏航角度异常，发电效率降低30%</p>
                                                    <small class="text-muted">15分钟前 | 影响容量: 24MW</small>
                                                </div>
                                                <div class="list-group-item">
                                                    <div class="d-flex w-100 justify-content-between">
                                                        <h6 class="mb-1">天气预警</h6>
                                                        <small class="text-warning">预警</small>
                                                    </div>
                                                    <p class="mb-1">未来4小时内阿坝地区或出现大风天气(12-14m/s)，风电场需做好应对</p>
                                                    <small class="text-muted">20分钟前 | 影响范围: 90MW装机容量</small>
                                                </div>
                                                <div class="list-group-item">
                                                    <div class="d-flex w-100 justify-content-between">
                                                        <h6 class="mb-1"> 异常</h6>
                                                        <small class="text-info">提示</small>
                                                    </div>
                                                    <p class="mb-1">绵阳光伏基地B区组件温度偏高，建议检查散热系统</p>
                                                    <small class="text-muted">30分钟前 | 影响容量: 20MW</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                    
                                    <!-- 决策建议卡片 -->
                                    <div class="card custom-card">
                                        <div class="card-header">
                                            <h5 class="mb-0">决策建议</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="alert alert-danger mb-3">
                                                <h6 class="alert-heading text-danger fw-bold">
                                                    <i class="fas fa-exclamation-triangle me-2"></i>紧急调度建议
                                                </h6>
                                                <p class="mb-0">1. 立即启动成都光伏电站备用逆变器阵列，预计可恢复50MW发电能力</p>
                                                <p class="mb-0">2. 建议临时增加甘孜风电功率限制至90%，应对大风天气</p>
                                                <small class="text-danger">预计执行时间：立即</small>
                                            </div>
                                            <div class="alert alert-warning mb-3">
                                                <h6 class="alert-heading text-warning fw-bold" style="color: #856404 !important;">
                                                    <i class="fas fa-tools me-2"></i>设备维护建议
                                                </h6>
                                                <p class="mb-0">1. 甘孜风电基地3#、5#风机需要进行偏航系统检修</p>
                                                <p class="mb-0">2. 绵阳光伏基地B区建议进行组件清洗和散热系统维护</p>
                                                <small class="text-warning">建议执行时间：今日14:00-16:00</small>
                                            </div>
                                            <div class="alert alert-info mb-0">
                                                <h6 class="alert-heading text-info fw-bold" style="color: #0c5460 !important;">
                                                    <i class="fas fa-chart-line me-2"></i>优化调度建议
                                                </h6>
                                                <p class="mb-0">1. 根据气象预报，明日10:00-14:00光照强度良好，建议提前调整光伏板角度至最优发电角度32°</p>
                                                <p class="mb-0">2. 阿坝风电场预计在18:00-22:00达到发电高峰，建议适当降低其他时段的功率限制</p>
                                                <small class="text-info">预计增加发电量：120MWh</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Page-content -->

                <footer class="footer">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-sm-6">
                                <script>document.write(new Date().getFullYear())</script> © 驭能能源管理系统.
                            </div>
                            <div class="col-sm-6">
                                <div class="text-sm-end d-none d-sm-block">
                                    <p class="mb-0">由 <i class="mdi mdi-heart text-danger"></i> 404REBORN 倾情打造 </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
            <!-- end main content-->
        </div>
        <!-- END layout-wrapper -->
        
        <!-- Right Sidebar -->
        <div class="right-bar">
            <div data-simplebar="" class="h-100">
                <div class="rightbar-title d-flex align-items-center bg-dark p-3">

                    <h5 class="m-0 me-2 text-white">Theme Customizer</h5>

                    <a href="javascript:void(0);" class="right-bar-toggle ms-auto">
                        <i class="mdi mdi-close noti-icon"></i>
                    </a>
                </div>

                <!-- Settings -->
                <hr class="m-0">

                <div class="p-4">
                    <h6 class="mb-3">Layout</h6>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="layout" id="layout-vertical" value="vertical">
                        <label class="form-check-label" for="layout-vertical">Vertical</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="layout" id="layout-horizontal" value="horizontal">
                        <label class="form-check-label" for="layout-horizontal">Horizontal</label>
                    </div>

                    <h6 class="mt-4 mb-3 pt-2">Layout Mode</h6>

                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="layout-mode" id="layout-mode-light" value="light">
                        <label class="form-check-label" for="layout-mode-light">Light</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="layout-mode" id="layout-mode-dark" value="dark">
                        <label class="form-check-label" for="layout-mode-dark">Dark</label>
                    </div>

                    <h6 class="mt-4 mb-3 pt-2">Layout Width</h6>

                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="layout-width" id="layout-width-fuild" value="fuild" onchange="document.body.setAttribute('data-layout-size', 'fluid')">
                        <label class="form-check-label" for="layout-width-fuild">Fluid</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="layout-width" id="layout-width-boxed" value="boxed" onchange="document.body.setAttribute('data-layout-size', 'boxed')">
                        <label class="form-check-label" for="layout-width-boxed">Boxed</label>
                    </div>

                    <h6 class="mt-4 mb-3 pt-2">Layout Position</h6>

                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="layout-position" id="layout-position-fixed" value="fixed" onchange="document.body.setAttribute('data-layout-scrollable', 'false')">
                        <label class="form-check-label" for="layout-position-fixed">Fixed</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="layout-position" id="layout-position-scrollable" value="scrollable" onchange="document.body.setAttribute('data-layout-scrollable', 'true')">
                        <label class="form-check-label" for="layout-position-scrollable">Scrollable</label>
                    </div>

                    <h6 class="mt-4 mb-3 pt-2">Topbar Color</h6>

                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="topbar-color" id="topbar-color-light" value="light" onchange="document.body.setAttribute('data-topbar', 'light')">
                        <label class="form-check-label" for="topbar-color-light">Light</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="topbar-color" id="topbar-color-dark" value="dark" onchange="document.body.setAttribute('data-topbar', 'dark')">
                        <label class="form-check-label" for="topbar-color-dark">Dark</label>
                    </div>

                    <h6 class="mt-4 mb-3 pt-2 sidebar-setting">Sidebar Size</h6>

                    <div class="form-check sidebar-setting">
                        <input class="form-check-input" type="radio" name="sidebar-size" id="sidebar-size-default" value="default" onchange="document.body.setAttribute('data-sidebar-size', 'lg')">
                        <label class="form-check-label" for="sidebar-size-default">Default</label>
                    </div>
                    <div class="form-check sidebar-setting">
                        <input class="form-check-input" type="radio" name="sidebar-size" id="sidebar-size-compact" value="compact" onchange="document.body.setAttribute('data-sidebar-size', 'md')">
                        <label class="form-check-label" for="sidebar-size-compact">Compact</label>
                    </div>
                    <div class="form-check sidebar-setting">
                        <input class="form-check-input" type="radio" name="sidebar-size" id="sidebar-size-small" value="small" onchange="document.body.setAttribute('data-sidebar-size', 'sm')">
                        <label class="form-check-label" for="sidebar-size-small">Small (Icon View)</label>
                    </div>

                    <h6 class="mt-4 mb-3 pt-2 sidebar-setting">Sidebar Color</h6>

                    <div class="form-check sidebar-setting">
                        <input class="form-check-input" type="radio" name="sidebar-color" id="sidebar-color-light" value="light" onchange="document.body.setAttribute('data-sidebar', 'light')">
                        <label class="form-check-label" for="sidebar-color-light">Light</label>
                    </div>
                    <div class="form-check sidebar-setting">
                        <input class="form-check-input" type="radio" name="sidebar-color" id="sidebar-color-dark" value="dark" onchange="document.body.setAttribute('data-sidebar', 'dark')">
                        <label class="form-check-label" for="sidebar-color-dark">Dark</label>
                    </div>
                    <div class="form-check sidebar-setting">
                        <input class="form-check-input" type="radio" name="sidebar-color" id="sidebar-color-brand" value="brand" onchange="document.body.setAttribute('data-sidebar', 'brand')">
                        <label class="form-check-label" for="sidebar-color-brand">Brand</label>
                    </div>

                    <h6 class="mt-4 mb-3 pt-2">Direction</h6>

                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="layout-direction" id="layout-direction-ltr" value="ltr">
                        <label class="form-check-label" for="layout-direction-ltr">LTR</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="layout-direction" id="layout-direction-rtl" value="rtl">
                        <label class="form-check-label" for="layout-direction-rtl">RTL</label>
                    </div>

                </div>

            </div> <!-- end slimscroll-menu-->
        </div>
        <!-- /Right-bar -->

        <!-- Right bar overlay-->
        <div class="rightbar-overlay"></div>

        <!-- 新建任务侧边抽屉 -->
        <div class="offcanvas offcanvas-end" tabindex="-1" id="droneTaskOffcanvas" aria-labelledby="droneTaskOffcanvasLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="droneTaskOffcanvasLabel">新建无人机任务</h5>
                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <form id="droneTaskForm">
                    <div class="mb-4">
                        <label class="form-label">选择无人机</label>
                        <select class="form-select form-select-lg" id="droneSelect" required>
                            <option value="">请选择无人机</option>
                            <option value="UAV-001">UAV-001 (可用)</option>
                            <option value="UAV-002">UAV-002 (可用)</option>
                            <option value="UAV-003">UAV-003 (可用)</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="form-label">任务类型</label>
                        <select class="form-select form-select-lg" id="taskType" required>
                            <option value="">请选择任务类型</option>
                            <option value="1">红外检测</option>
                            <option value="2">设备巡检</option>
                            <option value="3">清洁作业</option>
                            <option value="4">故障排查</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="form-label">目标设备/区域</label>
                        <select class="form-select form-select-lg" id="targetArea" required>
                            <option value="">请选择目标区域</option>
                            <option value="1">光伏阵列A区</option>
                            <option value="2">光伏阵列B区</option>
                            <option value="3">3#风机组</option>
                            <option value="4">5#风机组</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="form-label">计划起飞时间</label>
                        <input type="datetime-local" class="form-control form-control-lg" id="plannedTime" required>
                    </div>
                    <div class="mb-4">
                        <label class="form-label">任务优先级</label>
                        <select class="form-select form-select-lg" id="taskPriority" required>
                            <option value="">请选择优先级</option>
                            <option value="high">高</option>
                            <option value="medium">中</option>
                            <option value="low">低</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="form-label">备注说明</label>
                        <textarea class="form-control" id="taskRemarks" rows="4" placeholder="请输入任务备注信息..."></textarea>
                    </div>
                </form>
            </div>
            <div class="offcanvas-footer border-top p-3">
                <div class="d-grid gap-2">
                    <button type="button" class="btn btn-primary btn-lg waves-effect waves-light" onclick="submitDroneTask()">
                        创建任务
                    </button>
                    <button type="button" class="btn btn-light btn-lg waves-effect" data-bs-dismiss="offcanvas">
                        取消
                    </button>
                </div>
            </div>
        </div>

        <!-- 添加样式 -->
        <style>
            .offcanvas {
                background-color: #2a3042;
                border-left: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .offcanvas-header {
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                padding: 1rem 1.5rem;
            }
            
            .offcanvas-title {
                color: #fff;
                font-size: 1.1rem;
            }
            
            .offcanvas-body {
                padding: 1.5rem;
            }
            
            .offcanvas .form-label {
                color: #fff;
                font-weight: 500;
                margin-bottom: 0.5rem;
            }
            
            .offcanvas .form-control,
            .offcanvas .form-select {
                background-color: #2a3042;
                border: 1px solid rgba(255, 255, 255, 0.1);
                color: #fff;
                padding: 0.75rem 1rem;
            }
            
            .offcanvas .form-control:focus,
            .offcanvas .form-select:focus {
                background-color: #2a3042;
                border-color: #4F8CBE;
                color: #fff;
                box-shadow: 0 0 0 0.15rem rgba(79, 140, 190, 0.25);
            }
            
            .offcanvas .form-select option {
                background-color: #2a3042;
                color: #fff;
            }
            
            .offcanvas-footer {
                background-color: #2a3042;
                padding: 1rem 1.5rem;
            }
            
            .btn-close {
                filter: invert(1) grayscale(100%) brightness(200%);
            }
            
            .offcanvas .btn-lg {
                padding: 0.75rem 1.5rem;
                font-size: 1rem;
            }
            
            @media (min-width: 768px) {
                .offcanvas {
                    width: 450px;
                }
            }
        </style>

        <!-- 添加提交任务的脚本 -->
        <script>
            // 添加加载状态标志
            let isSubmitting = false;

            function submitDroneTask() {
                // 防止重复提交
                if (isSubmitting) return;
                
                // 获取表单数据
                const formData = {
                    drone: document.getElementById('droneSelect').value,
                    taskType: document.getElementById('taskType').value,
                    targetArea: document.getElementById('targetArea').value,
                    plannedTime: document.getElementById('plannedTime').value,
                    priority: document.getElementById('taskPriority').value,
                    remarks: document.getElementById('taskRemarks').value
                };

                console.log('Form data:', formData); // 调试日志

                // 验证表单
                if (!formData.drone || !formData.taskType || !formData.targetArea || !formData.plannedTime || !formData.priority) {
                    Swal.fire({
                        title: '表单验证失败',
                        text: '请填写所有必填项',
                        icon: 'error',
                        confirmButtonColor: '#4F8CBE'
                    });
                    return;
                }

                // 验证计划起飞时间
                const plannedDateTime = new Date(formData.plannedTime);
                const now = new Date();
                if (plannedDateTime < now) {
                    Swal.fire({
                        title: '时间验证失败',
                        text: '计划起飞时间不能早于当前时间',
                        icon: 'error',
                        confirmButtonColor: '#4F8CBE'
                    });
                    return;
                }

                // 设置提交状态
                isSubmitting = true;

                // 显示加载提示
                Swal.fire({
                    title: '正在创建任务...',
                    text: '请稍候',
                    allowOutsideClick: false,
                    didOpen: () => {
                        Swal.showLoading();
                    }
                });

                // 模拟API调用
                setTimeout(() => {
                    try {
                        // 查找所有表格
                        const tables = document.querySelectorAll('table');
                        let taskListTable = null;
                        
                        // 遍历所有表格，找到包含特定列标题的表格
                        for (const table of tables) {
                            const headers = table.querySelectorAll('th');
                            const headerTexts = Array.from(headers).map(th => th.textContent.trim());
                            
                            // 检查是否是任务列表表格（通过检查表头）
                            if (headerTexts.includes('无人机编号') && 
                                headerTexts.includes('任务类型') && 
                                headerTexts.includes('目标设备')) {
                                taskListTable = table.querySelector('tbody');
                                break;
                            }
                        }

                        console.log('Task list table found:', taskListTable); // 调试日志

                        if (!taskListTable) {
                            throw new Error('找不到任务列表表格');
                        }

                        // 创建新行
                        const newRow = document.createElement('tr');
                        
                        // 创建新任务行的HTML
                        newRow.innerHTML = `
                            <td>
                                <span class="badge bg-primary">${formData.drone}</span>
                            </td>
                            <td>${getTaskTypeName(formData.taskType)}</td>
                            <td>${getTargetAreaName(formData.targetArea)}</td>
                            <td><span class="badge bg-warning">待起飞</span></td>
                            <td>
                                <div class="progress" style="height: 4px;">
                                    <div class="progress-bar bg-warning" role="progressbar" style="width: 0%"></div>
                                </div>
                            </td>
                        `;
                        
                        console.log('New row created:', newRow); // 调试日志

                        // 将新任务插入到表格顶部
                        if (taskListTable.firstChild) {
                            taskListTable.insertBefore(newRow, taskListTable.firstChild);
                        } else {
                            taskListTable.appendChild(newRow);
                        }

                        console.log('New task added to table'); // 调试日志

                        // 更新无人机状态统计
                        updateDroneStats();

                        // 关闭侧边抽屉
                        const offcanvas = bootstrap.Offcanvas.getInstance(document.getElementById('droneTaskOffcanvas'));
                        offcanvas.hide();

                        // 重置提交状态
                        isSubmitting = false;

                        // 显示成功提示
                        Swal.fire({
                            title: '成功',
                            text: '任务创建成功！',
                            icon: 'success',
                            confirmButtonColor: '#4F8CBE'
                        }).then(() => {
                            // 重置表单
                            document.getElementById('droneTaskForm').reset();
                        });
                    } catch (error) {
                        console.error('Error adding task:', error); // 调试日志
                        isSubmitting = false;
                        Swal.fire({
                            title: '错误',
                            text: '添加任务失败：' + error.message,
                            icon: 'error',
                            confirmButtonColor: '#4F8CBE'
                        });
                    }
                }, 1000);
            }

            // 辅助函数：获取任务类型名称
            function getTaskTypeName(type) {
                const taskTypes = {
                    '1': '红外检测',
                    '2': '设备巡检',
                    '3': '清洁作业',
                    '4': '故障排查'
                };
                return taskTypes[type] || '未知类型';
            }

            // 辅助函数：获取目标区域名称
            function getTargetAreaName(area) {
                const areas = {
                    '1': '光伏阵列A区',
                    '2': '光伏阵列B区',
                    '3': '3#风机组',
                    '4': '5#风机组'
                };
                return areas[area] || '未知区域';
            }

            // 更新无人机状态统计
            function updateDroneStats() {
                // 获取所有状态计数器元素
                const availableCount = document.querySelector('[data-drone-status="available"] .fw-bold');
                const inTaskCount = document.querySelector('[data-drone-status="in-task"] .fw-bold');

                // 更新计数
                if (availableCount && inTaskCount) {
                    let available = parseInt(availableCount.textContent);
                    let inTask = parseInt(inTaskCount.textContent);
                    
                    // 减少可用数量，增加任务中数量
                    availableCount.textContent = `${available - 1}台`;
                    inTaskCount.textContent = `${inTask + 1}台`;
                }
            }

            // 添加表单验证监听器
            document.addEventListener('DOMContentLoaded', function() {
                const form = document.getElementById('droneTaskForm');
                const inputs = form.querySelectorAll('select, input, textarea');
                
                inputs.forEach(input => {
                    input.addEventListener('change', function() {
                        if (this.hasAttribute('required') && !this.value) {
                            this.classList.add('is-invalid');
                        } else {
                            this.classList.remove('is-invalid');
                        }
                    });
                });
            });

            // 添加一个帮助函数来查找包含特定文本的元素
            Element.prototype.contains = function(text) {
                return this.textContent.includes(text);
            };
        </script>

        <!-- JAVASCRIPT -->
        <script src="static/js/jquery.min.js"></script>
        <script src="static/js/bootstrap.bundle.min.js"></script>
        <script src="static/js/metisMenu.min.js"></script>
        <script src="static/js/simplebar.min.js"></script>
        <script src="static/js/waves.min.js"></script>
        <script src="static/js/feather.min.js"></script>
        <!-- pace js -->
        <script src="static/js/pace.min.js"></script>

        <!-- apexcharts -->
        <script src="static/js/apexcharts.min.js"></script>

        <!-- 添加表格管理器脚本 -->
        <script src="static/js/prediction-table.js"></script>

        <!-- 图表初始化脚本 -->
        <script src="static/js/power-charts.js"></script>

        <script src="static/js/app.js"></script>

        <!-- 在closing body tag前添加打印样式和导出函数 -->
        <style type="text/css" media="print">
            @media print {
                body {
                    background: white;
                }
                .d-print-none {
                    display: none !important;
                }
                .right-bar, .right-bar-toggle {
                    display: none !important;
                }
                .vertical-menu {
                    display: none !important;
                }
                .navbar-header {
                    display: none !important;
                }
                .footer {
                    display: none !important;
                }
                .main-content {
                    margin-left: 0 !important;
                    padding: 0 !important;
                }
                .container-fluid {
                    padding: 0 !important;
                }
                .card {
                    border: none !important;
                    box-shadow: none !important;
                }
                .card-body {
                    padding: 0 !important;
                }
                
                /* 确保图表完整显示 */
                .apex-charts {
                    width: 100% !important;
                    height: 400px !important;
                    page-break-inside: avoid;
                }
                
                /* 确保表格正确分页 */
                .table {
                    page-break-inside: auto;
                }
                tr {
                    page-break-inside: avoid;
                    page-break-after: auto;
                }
                
                /* 添加页眉 */
                @page {
                    margin: 2cm;
                }
                
                /* 优化打印颜色 */
                * {
                    -webkit-print-color-adjust: exact !important;
                    print-color-adjust: exact !important;
                }
            }
        </style>

        <script>
            function handleExportReport() {
                // 在打印前保存当前图表状态
                const currentSolarTab = document.querySelector('#solarpowerTab').classList.contains('active');
                const currentWindTab = document.querySelector('#windpowerTab').classList.contains('active');
                
                // 确保两个图表都显示（临时）
                document.querySelector('#solarpowerTab').classList.add('active', 'show');
                document.querySelector('#windpowerTab').classList.add('active', 'show');
                
                // 添加报告标题和时间戳
                const reportHeader = document.createElement('div');
                reportHeader.className = 'report-header d-none';
                reportHeader.style.textAlign = 'center';
                reportHeader.style.marginBottom = '20px';
                reportHeader.innerHTML = `
                    <h2 style="margin-bottom: 10px;">综合能源预测分析报告</h2>
                    <p style="color: #666;">生成时间：${new Date().toLocaleString('zh-CN')}</p>
                `;
                document.querySelector('.container-fluid').insertBefore(reportHeader, document.querySelector('.container-fluid').firstChild);
                reportHeader.classList.remove('d-none');

                // 调用打印
                window.print();

                // 打印完成后恢复原始状态
                reportHeader.remove();
                if (!currentSolarTab) {
                    document.querySelector('#solarpowerTab').classList.remove('active', 'show');
                }
                if (!currentWindTab) {
                    document.querySelector('#windpowerTab').classList.remove('active', 'show');
                }
            }
        </script>

        <!-- 添加表格样式 -->
        <style>
            .table-period-btn {
                margin-right: 5px;
            }
            .table-period-btn.active {
                background-color: #2196F3;
                border-color: #2196F3;
            }
            .status-indicator {
                display: inline-block;
                width: 10px;
                height: 10px;
                border-radius: 50%;
                margin-right: 5px;
            }
            .status-normal {
                background-color: #28a745;
            }
            .status-warning {
                background-color: #ffc107;
            }
            .status-danger {
                background-color: #dc3545;
            }
        </style>

        <!-- 在 </body> 标签前添加以下脚本 -->
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

        <script>
        // 初始化地图
        const map = L.map('sichuan-map').setView([30.67, 104.06], 7);

        // 添加OpenStreetMap底图
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // 示例数据 - 实际使用时替换为真实数据
        const solarStations = [
            { name: "成都光伏电站", lat: 30.67, lng: 104.06, capacity: "200MW" },
            { name: "绵阳光伏基地", lat: 31.47, lng: 104.75, capacity: "150MW" },
            { name: "乐山光伏园区", lat: 29.55, lng: 103.76, capacity: "180MW" }
        ];

        const windFarms = [
            { name: "雅安风电场", lat: 30.01, lng: 103.04, capacity: "100MW" },
            { name: "甘孜风电基地", lat: 31.62, lng: 100.00, capacity: "120MW" },
            { name: "阿坝风电园区", lat: 31.89, lng: 102.22, capacity: "90MW" }
        ];

        // 自定义图标
        const solarIcon = L.divIcon({
            html: '<i class="fas fa-solar-panel text-warning" style="font-size: 24px;"></i>',
            className: 'custom-div-icon',
            iconSize: [30, 30],
            iconAnchor: [15, 15]
        });

        const windIcon = L.divIcon({
            html: '<i class="fas fa-fan text-info" style="font-size: 24px;"></i>',
            className: 'custom-div-icon',
            iconSize: [30, 30],
            iconAnchor: [15, 15]
        });

        // 创建图层组
        const solarLayer = L.layerGroup();
        const windLayer = L.layerGroup();

        // 添加光伏电站标记
        solarStations.forEach(station => {
            L.marker([station.lat, station.lng], {icon: solarIcon})
                .bindPopup(`
                    <strong>${station.name}</strong><br>
                    装机容量: ${station.capacity}<br>
                    <small class="text-muted">点击查看详情</small>
                `)
                .addTo(solarLayer);
        });

        // 添加风电场标记
        windFarms.forEach(farm => {
            L.marker([farm.lat, farm.lng], {icon: windIcon})
                .bindPopup(`
                    <strong>${farm.name}</strong><br>
                    装机容量: ${farm.capacity}<br>
                    <small class="text-muted">点击查看详情</small>
                `)
                .addTo(windLayer);
        });

        // 将图层添加到地图
        solarLayer.addTo(map);
        windLayer.addTo(map);

        // 按钮事件处理
        document.getElementById('showSolarBtn').addEventListener('click', () => {
            map.removeLayer(windLayer);
            map.addLayer(solarLayer);
        });

        document.getElementById('showWindBtn').addEventListener('click', () => {
            map.removeLayer(solarLayer);
            map.addLayer(windLayer);
        });

        document.getElementById('showAllBtn').addEventListener('click', () => {
            map.addLayer(solarLayer);
            map.addLayer(windLayer);
        });

        // 添加地图样式
        const mapStyle = document.createElement('style');
        mapStyle.textContent = `
            .custom-div-icon {
                background: none;
                border: none;
            }
            .leaflet-popup-content {
                padding: 10px;
                min-width: 200px;
            }
            .leaflet-popup-content strong {
                color: #333;
                font-size: 14px;
            }
            .leaflet-container {
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
        `;
        document.head.appendChild(mapStyle);

        // 在初始化之前添加
        console.log('所有样式:', window.getComputedStyle(mapContainer));
        console.log('父元素样式:', window.getComputedStyle(mapContainer.parentElement));
    </script>

        <!-- 在其他脚本之后，</body> 标签之前添加 -->
        <script src="static/js/distribution-map.js"></script>

        <!-- 在body结束标签前添加 -->
        <script>
            // 直接在页面中定义初始化函数
            function initMap() {
                console.log('初始化地图...');
                
                const container = document.getElementById('distribution-map');
                if (!container) {
                    console.error('找不到地图容器');
                    return;
                }

                // 创建地图实例
                const chart = echarts.init(container);
                
                // 基础配置
                const option = {
                    backgroundColor: '#404a59',
                    tooltip: {
                        trigger: 'item',
                        formatter: '{b}<br/>装机容量: {c}MW'
                    },
                    geo: {
                        map: 'china',
                        roam: true,
                        zoom: 4,  // 增大缩放级别
                        center: [104.06, 30.67],  // 成都坐标，四川省中心
                        itemStyle: {
                            areaColor: '#323c48',
                            borderColor: '#111'
                        },
                        emphasis: {
                            itemStyle: {
                                areaColor: '#2a333d'
                            }
                        },
                        select: {
                            itemStyle: {
                                areaColor: '#2a333d'
                            }
                        }
                    },
                    series: [
                        {
                            name: '光伏电站',
                            type: 'effectScatter',
                            coordinateSystem: 'geo',
                            data: [
                                { name: "成都光伏电站", value: [104.06, 30.67, 200] },
                                { name: "绵阳光伏基地", value: [104.75, 31.47, 150] },
                                { name: "乐山光伏园区", value: [103.76, 29.55, 180] }
                            ],
                            symbolSize: 15,
                            itemStyle: { color: '#ffd700' },
                            rippleEffect: {
                                scale: 3,
                                brushType: 'stroke'
                            }
                        },
                        {
                            name: '风电场',
                            type: 'effectScatter',
                            coordinateSystem: 'geo',
                            data: [
                                { name: "雅安风电场", value: [103.04, 30.01, 100] },
                                { name: "甘孜风电基地", value: [100.00, 31.62, 120] },
                                { name: "阿坝风电园区", value: [102.22, 31.89, 90] }
                            ],
                            symbolSize: 15,
                            itemStyle: { color: '#4169e1' },
                            rippleEffect: {
                                scale: 3,
                                brushType: 'stroke'
                            }
                        }
                    ]
                };

                // 设置配置项
                chart.setOption(option);

                // 绑定按钮事件
                document.getElementById('showSolarBtn')?.addEventListener('click', () => {
                    chart.setOption({
                        series: [
                            { show: true },
                            { show: false }
                        ]
                    });
                });

                document.getElementById('showWindBtn')?.addEventListener('click', () => {
                    chart.setOption({
                        series: [
                            { show: false },
                            { show: true }
                        ]
                    });
                });

                document.getElementById('showAllBtn')?.addEventListener('click', () => {
                    chart.setOption({
                        series: [
                            { show: true },
                            { show: true }
                        ]
                    });
                });

                // 响应窗口大小变化
                window.addEventListener('resize', () => chart.resize());
                
                return chart;
            }

            // 确保脚本加载完成后执行
            window.addEventListener('load', function() {
                setTimeout(initMap, 500);
            });
    </script>

        <!-- 确保按正确顺序加载必要的脚本 -->
        <script src="static/js/echarts.min.js"></script>
        <script src="static/js/china.js"></script>
        <!-- 在 body 结束标签前添加 SweetAlert2 JS -->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.all.min.js"></script>
    </body>
</html>